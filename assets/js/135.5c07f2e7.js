(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{796:function(t,s,a){"use strict";a.r(s);var e=a(4),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("为了前后端分工明确，对接流畅，确保可读性和扩展性以及高可用、一致性，特约定下述无状态 RESTful API 接口规范。")]),t._v(" "),a("h2",{attrs:{id:"主要原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要原则"}},[t._v("#")]),t._v(" 主要原则")]),t._v(" "),a("p",[t._v("RESTful API 统一约束客户端和服务器之间的接口。简化和分离系统架构，使每个模块独立。")]),t._v(" "),a("ul",[a("li",[t._v("请求中使用 URI 定位资源")]),t._v(" "),a("li",[t._v("用 HTTP Verbs[动词]（GET、POST、PUT、PATCH、DELETE）描述操作（具体表现形式）")]),t._v(" "),a("li",[t._v("数据传递（默认）采用：Content-Type: application/json; charset=utf-8")]),t._v(" "),a("li",[t._v("单一职责原则：每个接口只负责一个职责，各个职责的接口改动，不影响其它接口")]),t._v(" "),a("li",[t._v("接口隔离原则：用多个专门的接口，而不使用单一的总接口")])]),t._v(" "),a("h2",{attrs:{id:"restful-资源操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-资源操作"}},[t._v("#")]),t._v(" RESTful 资源操作")]),t._v(" "),a("p",[t._v("RESTful 中根据操作资源的不同，使用不同的 http 方法。")]),t._v(" "),a("ul",[a("li",[t._v("幂等性：对同一 REST 接口的多次访问，得到的资源状态是相同的；")]),t._v(" "),a("li",[t._v("安全性：对该 REST 接口访问，不会使服务器端资源的状态发生改变。")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("http 方法")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("资源操作")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("幂等")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("安全")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GET")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("SELECT")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("POST")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("INSERT")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("PUT")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("UPDATE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("PATCH")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("UPDATE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("否")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("DELETE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("DELETE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("否")])])])]),t._v(" "),a("h3",{attrs:{id:"传统的-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传统的-url"}},[t._v("#")]),t._v(" 传统的 URL")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /users/query/1 根据用户id查询用户数据\nPOST /users/save 新增用户\nPOST /users/update 修改用户信息\nPOST /users/delete 删除用户信息\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"restful-风格的-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-风格的-url"}},[t._v("#")]),t._v(" RESTful 风格的 URL")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /users/{id} 根据用户id查询用户数据\nPOST /users 新增用户\nPUT /users 修改用户信息（客户端提供改变后的完整资源）\nPATCH /users 修改用户信息（客户端提供改变的属性）\nDELETE /users/{id} 删除用户信息\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"restful-设计准则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-设计准则"}},[t._v("#")]),t._v(" RESTful 设计准则")]),t._v(" "),a("h3",{attrs:{id:"宾语必须是名词"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#宾语必须是名词"}},[t._v("#")]),t._v(" 宾语必须是名词")]),t._v(" "),a("p",[t._v("宾语就是 API 的 URL，是 HTTP 动词作用的对象。它应该是名词，不能是动词。比如，/articles 这个 URL 就是正确的，而下面的 URL 不是名词，所以都是错误的。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" /getAllCars\n /createNewCar\n /deleteAllRedCars\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"小驼峰命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小驼峰命名"}},[t._v("#")]),t._v(" 小驼峰命名")]),t._v(" "),a("p",[t._v("宾语使用全小写名词表示，但有时一个名词无法完全描述清楚时，统一使用小驼峰命名")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /companyContracts/1\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"复数-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复数-url"}},[t._v("#")]),t._v(" 复数 URL")]),t._v(" "),a("p",[t._v("既然 URL 是名词，那么应该使用复数，还是单数？\n这没有统一的规定，但是常见的操作是读取一个集合，比如 GET /articles（读取所有文章），这里明显应该是复数。\n为了统一起见，建议都使用复数 URL，比如 GET /articles/2 要好于 GET /article/2。")]),t._v(" "),a("h3",{attrs:{id:"避免多级-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#避免多级-url"}},[t._v("#")]),t._v(" 避免多级 URL")]),t._v(" "),a("p",[t._v("常见的情况是，资源需要多级分类，因此很容易写出多级的 URL，比如获取某个作者的某一类文章。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /authors/12/categories/2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("这种 URL 不利于扩展，语义也不明确，往往要想一会，才能明白含义。\n更好的做法是，除了第一级，其他级别都用查询字符串表达。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /authors/12?categories=2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("下面是另一个例子，查询已发布的文章。你可能会设计成下面的 URL。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /articles/published\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("查询字符串的写法明显更好。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /articles?published=true\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"版本号放入-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本号放入-url"}},[t._v("#")]),t._v(" 版本号放入 URL")]),t._v(" "),a("p",[t._v("若有多个 API 版本，应该将 API 的版本号放入 URI")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /api/v2/authors/1\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"移动端接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端接口"}},[t._v("#")]),t._v(" 移动端接口")]),t._v(" "),a("p",[t._v("遵循最小化原则，业务完全相同使用同一个接口，不同则添加/mobile 体现 PC 端和移动端的对应关系")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /authors/12\nGET /mobile/authors/12\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"swagger-注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#swagger-注释"}},[t._v("#")]),t._v(" Swagger 注释")]),t._v(" "),a("p",[t._v("在 Swagger 中需包含详细注释说明，包括：")]),t._v(" "),a("ul",[a("li",[t._v("接口描述")]),t._v(" "),a("li",[t._v("请求数据类型(application/x-www-form-urlencoded、application/json 等)")]),t._v(" "),a("li",[t._v("请求参数说明、数据类型、是否必须")]),t._v(" "),a("li",[t._v("返回参数说明、数据类型")])]),t._v(" "),a("h2",{attrs:{id:"返回结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回结果"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),a("p",[t._v("API 返回结果应遵循以下格式与字段命名：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n "code":200, // 状态码以code命名(好多javascript框架并不会获取http状态码，所以包装到body中便于使用)\n "result": {   // 返回内容以result命名，多条记录使用JSON数组，单条记录使用JSON对象\n  "id":null,   // 数据类型String,空时为null\n  "name":"张三",\n  "age":20 , // 数据类型Number, 空时为null,\n  "imgUrls": [\'地址1\', \'地址2\'],  //数据类型Array, 空时为null\n  "photoUrls": null\n },\n "message":"成功", // 成功或错误消息，以message命名\n "success": true // 是否成功：true或false\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("分页列表返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n "code":200, // 状态码以code命名(好多javascript框架并不会获取http状态码，所以包装到body中便于使用)\n "result": {\n  "current": 1, // 当前页数以current命名\n  "pages": 2, // 总页数以pages命名\n  "records": [{...}, {...}], // 返回列表以records命名，使用JSON数组\n  "size": 10, // 每页条数以size命名\n  "total": 12 // 总条数以total命名\n },\n "message":"成功", // 成功或错误消息，以message命名\n "success": true // 是否成功：true或false\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h2",{attrs:{id:"状态码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[t._v("#")]),t._v(" 状态码")]),t._v(" "),a("p",[t._v("服务器向用户返回的状态码和提示信息，常见的有以下一些（方括号中是该状态码对应的 HTTP 动词）")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("- 200 OK - [GET]：服务器成功返回用户请求的数据，该操作是幂等的（Idempotent）。\n- 201 CREATED - [POST/PUT]：用户新建或修改数据成功。\n- 202 Accepted - [*]：表示一个请求已经进入后台排队（异步任务）\n- 204 NO CONTENT - [DELETE]：用户删除数据成功。\n- 400 INVALID REQUEST - [POST/PUT]：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。\n- 401 Unauthorized - [*]：表示用户没有权限（令牌、用户名、密码错误）。\n- 403 Forbidden - [*] 表示用户得到授权（与401错误相对），但是访问是被禁止的。\n- 404 NOT FOUND - [*]：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。\n- 406 Not Acceptable - [GET]：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。\n- 410 Gone -[GET]：用户请求的资源被永久删除，且不会再得到的。\n- 422 Unprocesable entity - [POST/PUT] 当创建一个对象时，发生一个验证错误。\n- 500 INTERNAL SERVER ERROR - [*]：服务器发生错误，用户将无法判断发出的请求是否成功。\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);